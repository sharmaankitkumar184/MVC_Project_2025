<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - MVC_Project.Web</title>

    <!-- Bootstrap CSS (CDN) without integrity hash -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          crossorigin="anonymous">

    <!-- Font Awesome for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/MVC_Project.Web.styles.css" asp-append-version="true" />

    <!-- jQuery (Load first to avoid conflicts) -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"
            crossorigin="anonymous"></script>
</head>
<body>

    @await Html.PartialAsync("_MainNavigation")

    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    @await Html.PartialAsync("_Footer")

    <!-- Bootstrap JS (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"></script>

    <!-- Custom Scripts -->
    <script src="~/js/site.js" asp-append-version="true"></script>

    @await RenderSectionAsync("Scripts", required: false)

    <script>
        const themeSwitch = document.getElementById("themeSwitch");
        const navbar = document.getElementById("mainNavbar");
        const mainfooter = document.getElementById("mainFooter");
        const themeLabel = document.getElementById("themeLabel");
        const navlinks = document.getElementsByClassName("nav-link");
        const navbrandname = document.getElementById("navbar-brand");
        const footerHeader = document.getElementById("footerHeader");
        const footerSocialLinks = document.getElementsByClassName("footer-Social-Links");
        const quickfooterlinks = document.getElementsByClassName("quick-Links-Footer");
        const pagetextstyle = document.getElementById("page-text-style");
        

        function setTheme(isDark) {
            document.body.classList.toggle("custom-body-style", isDark);
            document.body.classList.toggle("text-white", isDark);
            navbar.classList.toggle("custom-navbar-dark", isDark);
            navbar.classList.toggle("custom-navbar-light", !isDark);
            navbrandname.classList.toggle("custom-navbar-brand-dark", isDark);
            navbrandname.classList.toggle("custom-navbar-brand-light", !isDark);

            mainfooter.classList.toggle("custom-mainfooter-dark", isDark);
            mainfooter.classList.toggle("custom-mainfooter-light", !isDark);
            footerHeader.classList.toggle("footer-Header-dark", isDark);
            footerHeader.classList.toggle("footer-Header-light", !isDark);
            pagetextstyle.classList.toggle("custom-page-text-style-dark", isDark);
            pagetextstyle.classList.toggle("custom-page-text-style-light", !isDark);
            themeLabel.textContent = isDark ? "Dark Mode" : "Light Mode";

            for (let link of navlinks) {
                link.classList.toggle("custom-navlink-dark", isDark);
                link.classList.toggle("custom-navlink-light", !isDark);
            }

            for (let flink of footerSocialLinks) {
                flink.classList.toggle("custom-footer-social-links-dark", isDark);
                flink.classList.toggle("custom-footer-social-links-light", !isDark);
            }
            for (let qflink of quickfooterlinks) {
                qflink.classList.toggle("custom-footer-link-dark", isDark);
                qflink.classList.toggle("custom-footer-link-light", !isDark);
            }
            //added style foe page button style
            const pageSizeButtons = document.querySelectorAll(".page-size-button");
            pageSizeButtons.forEach(button => {
                button.classList.toggle("custom-page-dark", isDark);
                button.classList.toggle("custom-page-light", !isDark);
            });
        }

        // ✅ Apply theme on every page load
        window.addEventListener("DOMContentLoaded", () => {
            const savedMode = localStorage.getItem("isDarkMode") === "true";
            themeSwitch && (themeSwitch.checked = savedMode);
            setTheme(savedMode);
        });

        // ✅ Allow changing mode
        themeSwitch?.addEventListener("change", () => {
            const isDark = themeSwitch.checked;
            localStorage.setItem("isDarkMode", isDark);
            setTheme(isDark);
        });
    </script>


</body>
</html>
